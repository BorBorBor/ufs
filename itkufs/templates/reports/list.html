{% load i18n %}
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>{{ group.name }}</title>
    <link rel="stylesheet" type="text/css" href="{% url media "style/reset-min.css" %}" />
    <link rel="stylesheet" type="text/css" href="{% url media "style/fonts-min.css" %}" />
    <link rel="stylesheet" type="text/css" href="{% url media "style/list.css" %}" media="print,screen" />
    <link rel="shortcut icon" type="image/png" href="{% url media "images/favicon.png" %}" />
</head>

<body>

<p class="hidden">{% trans "<b>Invalid</b> list, do not use!" %}</p>

{% with list.column_set.all as columns %}
{% with list.total_width as width %}
{% with list.total_column_count as colspan %}

<table>
    <tfoot>
        <tr>
        <td colspan="{{ colspan }}">
                {% trans "Blacklisted accounts are marked with" %}
                <img src="{% url media "images/black.png" %}"/>.
                {% trans "Please remember to print with backgrounds and landscape orientation." %}
           </td>
        </tr>
    </tfoot>

    <thead>
        <tr>
        <th colspan="{{ colspan }}">
                <h1>{{ group.name }}: {{ list.name }}</h1>
                {% if group.logo %}
                <p id="logo"><img src="{% url media group.logo %}" alt="logo" /></p>
                {% endif %}

                <p id="secondary">
                  {% now "Y-m-d" %}
                  {% if group.email %} &ndash;
                  <a href="mailto:{{ group.email }}">{{group.email}}</a>
                  {% endif %}
                </p>
        </th>
        </tr>
        <tr>
            <th style="width: {% widthratio list.account_width width 100 %}%">{% trans "Name" %}</th>
            {% ifnotequal list.balance_width 0 %}
            <th style="width: {% widthratio list.balance_width width 100 %}%">{% trans "Balance" %}</th>
            {% endifnotequal %}
        {% for column in columns %}
            <th style="width: {% widthratio column.width width 100 %}%">{{ column.name }}</th>
        {% endfor %}
        </tr>
    </thead>

    <tbody>
    {% for account in accounts %}
        {% if account.is_user_account %}
        <tr class="{% cycle even,odd as row %}{% if account.is_blocked %} blacklisted{% endif %}">
            <th class="name"{% if list.double and not account.is_blocked %} rowspan="2"{% endif %}>{{ account.name }}</th>
            {% ifnotequal list.balance_width 0 %}
            <td class="balance"{% if list.double and not account.is_blocked %} rowspan="2"{% endif %}>{{ account.user_balance }}</td>
            {% endifnotequal %}
            {% for item in columns %}
                {% if not account.is_blocked %}
            <td{% if list.double and not account.is_blocked %} class="double"{% endif %}></td>
                {% else %}
            <td><img src="{% url media "images/black.png" %}"/></td>
                {% endif %}
        {% endfor %}
        </tr>
    {% if list.double and not account.is_blocked  %}
    <tr class="{{ row }}">
            {% for item in columns %}
                {% if not account.is_blocked %}
            <td></td>
                {% else %}
            <td><img src="{% url media "images/black.png" %}"/></td>
                {% endif %}
        {% endfor %}
        </tr>
    {% endif %}
        {% endif %}
    {% endfor %}
    </tbody>
</table>

{% endwith %}
{% endwith %}
{% endwith %}

{% if debug %}
    {% include 'debug.html' %}
{% endif %}

</body>

</html>
