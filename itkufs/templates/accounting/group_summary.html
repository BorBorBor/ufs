{% extends "accounting/base.html" %}

{% block title %}{{ group.name }}{% endblock %}
{% block header %}{{ group.name }}{% endblock %}

{% block content %}
<h2>Group summary for {{ group.name }}</h2>

<table class="tabledetails">
    <tr>
        <th>Warning limit</th>
        <td>{{ group.warn_limit }}</td>
    </tr>
    <tr>
        <th>Blocking limit</th>
        <td>{{ group.block_limit }}</td>
    </tr>
</table>

<h3>Lists</h3>
{% if not group.lists.count %}
<p>No lists configured for this group.</p>
{% else %}
<ul>
    {% for list in group.lists.all %}
        <li><a href="{% url html-list group.slug,list.slug %}">{{ list.name }}</a></li>
    {% endfor %}
</ul>
{% endif %}

{% if is_admin %}

<h3>Accounts</h3>

{% if not group.account_set.count %}
<p>No accounts found.</p>
{% else %}

<table class="tablelist">
    <tr>
        <th>Account</th>
        <th>Type</th>
        <th>Balance</th>
    </tr>
{% for account in group.account_set.all %}
    <tr>
        <td><a href="{% url account-summary account.group.slug,account.slug %}">{{ account.name }}</a></td>
        <td>{{ account.get_type_display }}</td>
        <td class="align_right{% if account.is_blocked %} blocked{% endif %}">{{ account.balance|stringformat:"0.2f" }}</td>
    </tr>
{% endfor %}
</table>

{% endif %}

{% endif %}

{% endblock %}
